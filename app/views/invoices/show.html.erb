<h1>Invoice Information</h1>

<div class="container text-center">
  <div class="row">
    <div class="col">
      <p><b>Invoice Name</b>: <%=@invoice.invoice_name%> </p>
    </div>
    <div class="col">
      <p><b>Invoice Date</b>:  </br><%=@invoice.invoice_date%></p>
    </div>
    <div class="col">
      <p><b>Payment Date</b>: <%=@invoice.payment_date%></p>
    </div>
    <div class="col">
      <p><b>Invoice Number</b>: <%=@invoice.invoice_number%> </p>
    </div>
    <div class="col">
      <p><b>Customer Name</b>: <%=@invoice.customer.name%></p>
    </div>
    <div class="col">
      <p><b>Entity Name</b>:  </br><%=@invoice.entity.name%></p>
    </div>
  </div>
  <div class="row">
    <div class="col">
      <%@invoice.is_paid.nil? ? paid = "No" : paid = "Yes"%>
      <p><b>Pay√©</b>: </br><%=paid%></p>
    </div>
  </div>
</div>
</br>

<a class="btn btn-primary" href="./<%=@invoice.id%>.generate_pdf.pdf" role="button">Generate PDF</a>
<a class="btn btn-primary" href="./<%=@invoice.id%>/edit" role="button">Edit Information Invoice</a>
<a class="btn btn-primary" href="./<%=@invoice.id%>/add_transaction" role="button">Add a Transaction</a>

<% total_amount = 0 %>
<% total_vat = 0 %>

</br>
</br>
</br>

<table class="table">
  <thead>
    <tr>
      <th scope="col">#</th>
      <th scope="col">Items</th>
      <th scope="col">Comments</th>
      <th scope="col">Quantity</th>
      <th scope="col">Net Amount / Unit</th>
      <th scope="col">VAT Amount / Unit</th>
      <th scope="col">Total Price</th>
      <th scope="col">Action</th>
    </tr>
  </thead>
  <tbody>
  <%i=1%>
  <%@transactions.each do |transaction|%>
    <% total_amount += transaction.net_amount+ transaction.vat_amount %>
    <% total_vat += transaction.vat_amount  %>
    <tr>
      <th scope="row"><%=i%></th>
      <td><%=transaction.item.item_name%></td>
      <td><%=transaction.comment%></td>
      <td><%=transaction.quantity%></td>
      <td><%=transaction.net_amount%></td>
      <td><%=transaction.vat_amount%></td>
      <td><%=transaction.net_amount+ transaction.vat_amount%></td>
      <td>
        <a class="btn btn-primary" href="./<%=@invoice.id%>/transactions/<%=transaction.id%>/edit_transaction_invoice" role="button">Edit Transaction</a>
        <a class="btn btn-danger" href="./<%=@invoice.id%>/transactions/<%=transaction.id%>/delete_transaction" onclick="return confirm('Are you sure?')"> Delete </a>
      </td>
    </tr>
    <%i +=1%>
    <%end%>
  </tbody>
</table>

<p> <b>Total Amount</b>: <%= total_amount %> </p>
<p> <b>Total VAT Amount</b>: <%=total_vat %></p>
